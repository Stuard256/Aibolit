#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Расширенный датасет ветеринарных заболеваний с лабораторными анализами
Включает ОАК, БАК, БАМ и детальные симптомы
"""

import pandas as pd
import numpy as np
from sklearn.preprocessing import LabelEncoder
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestClassifier
from sklearn.metrics import accuracy_score, classification_report
import joblib

class AdvancedVeterinaryDataset:
    """
    Создание расширенного датасета ветеринарных заболеваний
    с лабораторными анализами и детальными симптомами
    """
    
    def __init__(self):
        self.symptoms = []
        self.diseases = []
        self.animal_types = ['собака', 'кошка', 'хомяк', 'птица', 'кролик', 'черепаха']
        
    def create_comprehensive_symptoms(self):
        """Создание полного списка симптомов с лабораторными анализами"""
        self.symptoms = [
            # Общие симптомы
            'лихорадка', 'гипотермия', 'анорексия', 'полифагия', 'вялость', 
            'слабость', 'депрессия', 'беспокойство', 'агрессия', 'изменение_поведения',
            
            # Желудочно-кишечные
            'рвота', 'диарея', 'запор', 'вздутие_живота', 'боль_в_животе',
            'слюнотечение', 'тошнота', 'кровь_в_кале', 'черный_стул', 'мелена',
            'асцит', 'увеличение_печени', 'желтуха', 'бледность_слизистых',
            
            # Дыхательные
            'кашель', 'чихание', 'выделения_из_носа', 'затрудненное_дыхание',
            'учащенное_дыхание', 'хрипы', 'одышка', 'кровь_из_носа', 'цианоз',
            'пневмония', 'плеврит', 'ринит', 'синусит',
            
            # Кожа и шерсть
            'зуд', 'выпадение_шерсти', 'покраснение_кожи', 'сыпь', 'язвы_на_коже',
            'сухая_кожа', 'жирная_кожа', 'перхоть', 'пятна_на_коже', 'алопеция',
            'дерматит', 'экзема', 'пиодермия', 'фурункулез',
            
            # Глаза - детальные симптомы
            'выделения_из_глаз', 'покраснение_глаз', 'помутнение_глаз', 'слезотечение',
            'светобоязнь', 'косоглазие', 'выпячивание_глаз', 'конъюнктивит',
            'кератит', 'увеит', 'катаракта', 'глаукома', 'повышение_внутриглазного_давления',
            'корочки_на_краях_век', 'помутнение_роговицы', 'помутнение_хрусталика',
            
            # Неврологические
            'судороги', 'паралич', 'нарушение_координации', 'головокружение',
            'потеря_сознания', 'атаксия', 'тремор', 'гиперрефлексия',
            'менингит', 'энцефалит', 'полиневрит', 'дископатия',
            'водобоязнь', 'фотофобия', 'гиперсаливация',
            'дисфагия', 'паралич_глотки', 'паралич_челюсти', 'агрессивность',
            'дезориентация', 'галлюцинации', 'спазмы_глотки', 'судороги_дыхательных_мышц',
            
            # Мочеполовые - детальные симптомы
            'частое_мочеиспускание', 'редкое_мочеиспускание', 'кровь_в_моче',
            'болезненное_мочеиспускание', 'недержание_мочи', 'полиурия',
            'олигурия', 'анурия', 'протеинурия', 'гематурия',
            'боль_при_мочеиспускании', 'боль_внизу_живота', 'боль_в_области_поясницы',
            'красный_цвет_мочи', 'моча_как_мясные_помои', 'белесый_цвет_мочи',
            'густая_моча_от_гноя', 'бесцветная_моча', 'низкая_удельная_масса_мочи',
            
            # Опорно-двигательные
            'хромота', 'скованность_движений', 'боль_в_суставах', 'мышечная_слабость',
            'деформация_конечностей', 'нежелание_двигаться', 'артрит', 'миозит',
            'остеопороз', 'переломы', 'вывихи', 'растяжения',
            
            # Сердечно-сосудистые
            'учащенное_сердцебиение', 'замедленное_сердцебиение', 'аритмия',
            'отеки', 'бледность_слизистых', 'синюшность_слизистых', 
            'холодные_конечности', 'кардиомиопатия', 'сердечная_недостаточность',
            'гипертония', 'гипотония', 'тромбоэмболия',
            
            # Другие
            'увеличение_лимфоузлов', 'потеря_веса', 'увеличение_веса', 'жажда',
            'полидипсия', 'неприятный_запах_изо_рта', 'кровоточивость_десен',
            'стоматит', 'гингивит', 'пародонтит', 'кариес',
            
            # Специфические инфекционные
            'водобоязнь', 'фотофобия', 'гиперсаливация',
            'дисфагия', 'паралич_глотки', 'паралич_челюсти', 'агрессивность',
            'дезориентация', 'галлюцинации', 'спазмы_глотки', 'судороги_дыхательных_мышц',
            
            # ЛАБОРАТОРНЫЕ АНАЛИЗЫ
            
            # Общий анализ крови (ОАК)
            'оак_эритроциты_ниже_нормы', 'оак_эритроциты_норма', 'оак_эритроциты_выше_нормы',
            'оак_лейкоциты_ниже_нормы', 'оак_лейкоциты_норма', 'оак_лейкоциты_выше_нормы',
            'оак_гемоглобин_ниже_нормы', 'оак_гемоглобин_норма', 'оак_гемоглобин_выше_нормы',
            'оак_гематокрит_ниже_нормы', 'оак_гематокрит_норма', 'оак_гематокрит_выше_нормы',
            'оак_тромбоциты_ниже_нормы', 'оак_тромбоциты_норма', 'оак_тромбоциты_выше_нормы',
            'оак_нейтрофилы_ниже_нормы', 'оак_нейтрофилы_норма', 'оак_нейтрофилы_выше_нормы',
            'оак_лимфоциты_ниже_нормы', 'оак_лимфоциты_норма', 'оак_лимфоциты_выше_нормы',
            'оак_моноциты_ниже_нормы', 'оак_моноциты_норма', 'оак_моноциты_выше_нормы',
            'оак_эозинофилы_ниже_нормы', 'оак_эозинофилы_норма', 'оак_эозинофилы_выше_нормы',
            'оак_базофилы_ниже_нормы', 'оак_базофилы_норма', 'оак_базофилы_выше_нормы',
            'оак_соэ_ниже_нормы', 'оак_соэ_норма', 'оак_соэ_выше_нормы',
            
            # Биохимический анализ крови (БАК)
            'бак_глюкоза_ниже_нормы', 'бак_глюкоза_норма', 'бак_глюкоза_выше_нормы',
            'бак_мочевина_ниже_нормы', 'бак_мочевина_норма', 'бак_мочевина_выше_нормы',
            'бак_креатинин_ниже_нормы', 'бак_креатинин_норма', 'бак_креатинин_выше_нормы',
            'бак_общий_белок_ниже_нормы', 'бак_общий_белок_норма', 'бак_общий_белок_выше_нормы',
            'бак_альбумин_ниже_нормы', 'бак_альбумин_норма', 'бак_альбумин_выше_нормы',
            'бак_глобулины_ниже_нормы', 'бак_глобулины_норма', 'бак_глобулины_выше_нормы',
            'бак_билирубин_общий_ниже_нормы', 'бак_билирубин_общий_норма', 'бак_билирубин_общий_выше_нормы',
            'бак_билирубин_прямой_ниже_нормы', 'бак_билирубин_прямой_норма', 'бак_билирубин_прямой_выше_нормы',
            'бак_алт_ниже_нормы', 'бак_алт_норма', 'бак_алт_выше_нормы',
            'бак_аст_ниже_нормы', 'бак_аст_норма', 'бак_аст_выше_нормы',
            'бак_щелочная_фосфатаза_ниже_нормы', 'бак_щелочная_фосфатаза_норма', 'бак_щелочная_фосфатаза_выше_нормы',
            'бак_холестерин_ниже_нормы', 'бак_холестерин_норма', 'бак_холестерин_выше_нормы',
            'бак_триглицериды_ниже_нормы', 'бак_триглицериды_норма', 'бак_триглицериды_выше_нормы',
            'бак_кальций_ниже_нормы', 'бак_кальций_норма', 'бак_кальций_выше_нормы',
            'бак_фосфор_ниже_нормы', 'бак_фосфор_норма', 'бак_фосфор_выше_нормы',
            'бак_натрий_ниже_нормы', 'бак_натрий_норма', 'бак_натрий_выше_нормы',
            'бак_калий_ниже_нормы', 'бак_калий_норма', 'бак_калий_выше_нормы',
            'бак_хлориды_ниже_нормы', 'бак_хлориды_норма', 'бак_хлориды_выше_нормы',
            
            # Биохимический анализ мочи (БАМ)
            'бам_белок_ниже_нормы', 'бам_белок_норма', 'бам_белок_выше_нормы',
            'бам_глюкоза_ниже_нормы', 'бам_глюкоза_норма', 'бам_глюкоза_выше_нормы',
            'бам_кетоны_ниже_нормы', 'бам_кетоны_норма', 'бам_кетоны_выше_нормы',
            'бам_билирубин_ниже_нормы', 'бам_билирубин_норма', 'бам_билирубин_выше_нормы',
            'бам_уробилиноген_ниже_нормы', 'бам_уробилиноген_норма', 'бам_уробилиноген_выше_нормы',
            'бам_нитриты_ниже_нормы', 'бам_нитриты_норма', 'бам_нитриты_выше_нормы',
            'бам_лейкоциты_ниже_нормы', 'бам_лейкоциты_норма', 'бам_лейкоциты_выше_нормы',
            'бам_эритроциты_ниже_нормы', 'бам_эритроциты_норма', 'бам_эритроциты_выше_нормы',
            'бам_удельная_плотность_ниже_нормы', 'бам_удельная_плотность_норма', 'бам_удельная_плотность_выше_нормы',
            'бам_ph_ниже_нормы', 'бам_ph_норма', 'бам_ph_выше_нормы',
            'бам_кристаллы_ниже_нормы', 'бам_кристаллы_норма', 'бам_кристаллы_выше_нормы',
            'бам_цилиндры_ниже_нормы', 'бам_цилиндры_норма', 'бам_цилиндры_выше_нормы',
            'бам_бактерии_ниже_нормы', 'бам_бактерии_норма', 'бам_бактерии_выше_нормы'
        ]
        
    def create_comprehensive_diseases(self):
        """Создание полного списка заболеваний с детальными симптомами"""
        self.diseases = [
            # ИНФЕКЦИОННЫЕ ЗАБОЛЕВАНИЯ СОБАК
            'парвовирусный_энтерит', 'чума_плотоядных', 'бешенство', 'лептоспироз',
            'инфекционный_гепатит', 'аденовирусная_инфекция', 'коронавирусная_инфекция',
            'бордетеллез', 'микоплазмоз', 'хламидиоз', 'риккетсиоз', 'эрлихиоз',
            'анаплазмоз', 'бабезиоз', 'лейшманиоз', 'токсоплазмоз', 'криптоспоридиоз',
            'кокцидиоз', 'лямблиоз', 'трихомоноз', 'кандидоз', 'аспергиллез',
            'гистоплазмоз', 'бластомикоз', 'кокцидиоидомикоз', 'споротрихоз',
            'дерматофитоз', 'малассезиоз', 'демодекоз', 'саркоптоз', 'нотоэдроз',
            'отодектоз', 'хейлетиеллез', 'блошиная_инвазия', 'вшивость',
            'клещевая_инвазия', 'дирофиляриоз', 'токсокароз', 'токсаскаридоз',
            'анкилостомоз', 'стронгилоидоз', 'трихоцефалез', 'дипилидиоз',
            'тениоз', 'эхинококкоз', 'альвеококкоз', 'спарганоз',
            
            # ИНФЕКЦИОННЫЕ ЗАБОЛЕВАНИЯ КОШЕК
            'панлейкопения', 'калицивироз', 'ринотрахеит', 'вирусный_перитонит',
            'вирусная_лейкемия', 'вирусный_иммунодефицит', 'коронавирусная_инфекция_кошек',
            'бордетеллез_кошек', 'микоплазмоз_кошек', 'хламидиоз_кошек',
            'бартонеллез', 'риккетсиоз_кошек', 'эрлихиоз_кошек', 'анаплазмоз_кошек',
            'бабезиоз_кошек', 'лейшманиоз_кошек', 'токсоплазмоз_кошек',
            'криптоспоридиоз_кошек', 'кокцидиоз_кошек', 'лямблиоз_кошек',
            'трихомоноз_кошек', 'кандидоз_кошек', 'аспергиллез_кошек',
            'гистоплазмоз_кошек', 'бластомикоз_кошек', 'кокцидиоидомикоз_кошек',
            'споротрихоз_кошек', 'дерматофитоз_кошек', 'малассезиоз_кошек',
            'демодекоз_кошек', 'саркоптоз_кошек', 'нотоэдроз_кошек',
            'отодектоз_кошек', 'хейлетиеллез_кошек', 'блошиная_инвазия_кошек',
            'вшивость_кошек', 'клещевая_инвазия_кошек', 'дирофиляриоз_кошек',
            'токсокароз_кошек', 'токсаскаридоз_кошек', 'анкилостомоз_кошек',
            'стронгилоидоз_кошек', 'трихоцефалез_кошек', 'дипилидиоз_кошек',
            'тениоз_кошек', 'эхинококкоз_кошек', 'альвеококкоз_кошек',
            
            # НЕИНФЕКЦИОННЫЕ ЗАБОЛЕВАНИЯ
            'гастроэнтерит', 'панкреатит', 'гепатит', 'цирроз_печени', 'энтерит',
            'колит', 'язва_желудка', 'непроходимость_кишечника', 'заворот_кишок',
            'пневмония', 'бронхит', 'астма', 'плеврит', 'ринит', 'синусит',
            'ларингит', 'трахеит', 'дерматит', 'экзема', 'аллергический_дерматит',
            'себорея', 'лишай', 'пиодермия', 'эпилепсия', 'инсульт', 'менингит',
            'энцефалит', 'полиневрит', 'дископатия', 'вестибулярный_синдром',
            'когнитивная_дисфункция', 'сердечная_недостаточность', 'кардиомиопатия',
            'аритмия', 'гипертония', 'гипотония', 'тромбоэмболия', 'анемия',
            'лейкоз', 'почечная_недостаточность', 'цистит', 'пиелонефрит',
            'мочекаменная_болезнь', 'простатит', 'эндометрит', 'мастит',
            'диабет_1_типа', 'диабет_2_типа', 'несахарный_диабет', 'гипотиреоз', 'гипертиреоз', 
            'синдром_кушинга', 'болезнь_аддисона', 'ожирение', 'кахексия', 'конъюнктивит',
            'кератит', 'катаракта', 'глаукома', 'увеит', 'отслоение_сетчатки',
            'слепота', 'отит', 'отит_наружный', 'отит_средний', 'отит_внутренний',
            'глухота', 'стоматит', 'гингивит', 'пародонтит', 'кариес',
            'абсцесс_зуба', 'лимфома', 'саркома', 'карцинома', 'меланома',
            'лейкемия', 'артрит', 'остеоартрит', 'ревматоидный_артрит',
            'остеопороз', 'остеомаляция', 'рахит', 'гиперпаратиреоз',
            'гипопаратиреоз', 'акромегалия', 'гипопитуитаризм',
            'синдром_неадекватной_секреции_АДГ', 'феохромоцитома', 'инсулинома',
            'глюкагонома', 'соматостатинома', 'гастринома', 'випома',
            'карциноидный_синдром', 'синдром_Золлингера_Эллисона',
            'синдром_Вернера_Моррисона', 'синдром_Карциноида',
            'синдром_Маллори_Вейсса', 'синдром_Бурхаве', 'синдром_Боаса',
            'синдром_Рейно', 'синдром_Марфана', 'синдром_Элерса_Данлоса',
            'синдром_Дауна', 'синдром_Тернера', 'синдром_Клайнфельтера',
            'синдром_Прадера_Вилли', 'синдром_Ангельмана', 'синдром_Ретта',
            'синдром_Аспергера', 'синдром_Туретта', 'синдром_Жиль_де_ла_Туретта'
        ]
        
    def create_realistic_dataset(self, n_samples=5000):
        """Создание реалистичного датасета с правильными симптомами"""
        self.create_comprehensive_symptoms()
        self.create_comprehensive_diseases()
        
        data = []
        
        for _ in range(n_samples):
            # Выбираем случайное заболевание
            disease = np.random.choice(self.diseases)
            
            # Определяем тип животного на основе заболевания
            animal_type = self._get_animal_type_for_disease(disease)
            
            # Создаем симптомы на основе заболевания
            symptoms_vector = np.zeros(len(self.symptoms))
            
            # Определяем симптомы для каждого заболевания
            self._assign_symptoms_for_disease(disease, symptoms_vector)
            
            # Добавляем случайные симптомы (шум)
            noise_symptoms = np.random.choice(len(self.symptoms), 
                                            size=np.random.randint(0, 3), 
                                            replace=False)
            for symptom_idx in noise_symptoms:
                if symptoms_vector[symptom_idx] == 0:
                    symptoms_vector[symptom_idx] = np.random.choice([0, 1], 
                                                                   p=[0.7, 0.3])
            
            # Создаем запись
            record = {
                'animal_type': animal_type,
                'disease': disease
            }
            
            # Добавляем симптомы
            for i, symptom in enumerate(self.symptoms):
                record[symptom] = symptoms_vector[i]
            
            data.append(record)
        
        return pd.DataFrame(data)
    
    def _get_animal_type_for_disease(self, disease):
        """Определение типа животного для заболевания"""
        # Собаки
        dog_diseases = [
            'парвовирусный_энтерит', 'чума_плотоядных', 'бешенство', 'лептоспироз',
            'пироплазмоз', 'демодекоз', 'саркоптоз', 'пиодермия', 'дерматит',
            'гастроэнтерит', 'панкреатит', 'гепатит', 'нефрит', 'цистит',
            'пиелонефрит', 'дисплазия_тазобедренного_сустава', 'артрит',
            'дилатационная_кардиомиопатия', 'эндокардит', 'аритмия',
            'эпилепсия', 'менингит', 'энцефалит', 'паралич', 'слепота',
            'глухота', 'катаракта', 'глаукома', 'конъюнктивит', 'кератит',
            'отит', 'ринит', 'синусит', 'пневмония', 'плеврит',
            'астма', 'бронхит', 'ларингит', 'фарингит', 'стоматит',
            'гингивит', 'пародонтит', 'кариес', 'абсцесс', 'опухоль',
            'лейкемия', 'лимфома', 'саркома', 'аденокарцинома', 'меланома',
            'диабет', 'гипотиреоз', 'гипертиреоз', 'болезнь_кушинга',
            'болезнь_аддисона', 'ожирение', 'анорексия', 'булимия'
        ]
        
        # Кошки
        cat_diseases = [
            'кошачий_инфекционный_перитонит', 'кошачий_лейкоз', 'кошачий_иммунодефицит',
            'кошачья_астма', 'кошачий_диабет', 'гипертиреоз_кошек',
            'хроническая_болезнь_почек_кошек', 'мочекаменная_болезнь_кошек',
            'кошачий_герпесвирус', 'кошачий_калицивирус', 'кошачий_панлейкопения',
            'кошачий_хламидиоз', 'кошачий_микоплазмоз', 'кошачий_токсоплазмоз',
            'кошачий_бартонеллез', 'кошачий_боррелиоз', 'кошачий_эрлихиоз',
            'кошачий_анаплазмоз', 'кошачий_бабезиоз', 'кошачий_трипаносомоз',
            'кошачий_лейшманиоз', 'кошачий_криптоспоридиоз', 'кошачий_изоспороз',
            'кошачий_гиардиоз', 'кошачий_токсокароз', 'кошачий_анкилостомоз',
            'кошачий_дипилидиоз', 'кошачий_эхинококкоз', 'кошачий_альвеококкоз',
            'кошачий_описторхоз', 'кошачий_клонорхоз', 'кошачий_фасциолез',
            'кошачий_дикроцелиоз', 'кошачий_метагонимоз', 'кошачий_нанофиетоз',
            'кошачий_гетерофиоз', 'кошачий_эуритрематоз', 'кошачий_псевдоамфистомоз',
            'кошачий_стригоидоз', 'кошачий_цистицеркоз', 'кошачий_ценуроз',
            'кошачий_саркоцистоз', 'кошачий_неоспороз', 'кошачий_токсоплазмоз',
            'кошачий_криптоспоридиоз', 'кошачий_изоспороз', 'кошачий_гиардиоз'
        ]
        
        # Птицы
        bird_diseases = [
            'птичий_грипп', 'птичья_холера', 'птичья_оспа', 'птичий_туберкулез',
            'птичий_аспергиллез', 'птичий_кандидоз', 'птичий_криптококкоз',
            'птичий_гистоплазмоз', 'птичий_кокцидиоз', 'птичий_гексамитоз',
            'птичий_трихомоноз', 'птичий_лямблиоз', 'птичий_криптоспоридиоз',
            'птичий_изоспороз', 'птичий_эймериоз', 'птичий_токсоплазмоз',
            'птичий_неоспороз', 'птичий_саркоцистоз', 'птичий_лейшманиоз',
            'птичий_трипаносомоз', 'птичий_лейкоз', 'птичий_лимфома',
            'птичий_саркома', 'птичий_аденокарцинома', 'птичий_меланома',
            'птичий_диабет', 'птичий_гипотиреоз', 'птичий_гипертиреоз',
            'птичья_болезнь_кушинга', 'птичья_болезнь_аддисона', 'птичье_ожирение',
            'птичья_анорексия', 'птичья_булимия', 'птичья_депрессия',
            'птичье_беспокойство', 'птичья_агрессия', 'птичье_изменение_поведения'
        ]
        
        # Хомяки
        hamster_diseases = [
            'хомячий_диабет', 'хомячья_опухоль', 'хомячья_инфекция',
            'хомячья_простуда', 'хомячья_пневмония', 'хомячий_бронхит',
            'хомячья_астма', 'хомячий_ринит', 'хомячий_синусит',
            'хомячья_пневмония', 'хомячий_плеврит', 'хомячья_инфекция_дыхательных_путей',
            'хомячий_гастроэнтерит', 'хомячий_панкреатит', 'хомячий_гепатит',
            'хомячий_нефрит', 'хомячий_цистит', 'хомячий_пиелонефрит',
            'хомячья_мочекаменная_болезнь', 'хомячий_диабет', 'хомячий_гипотиреоз',
            'хомячий_гипертиреоз', 'хомячья_болезнь_кушинга', 'хомячья_болезнь_аддисона',
            'хомячье_ожирение', 'хомячья_анорексия', 'хомячья_булимия'
        ]
        
        # Кролики
        rabbit_diseases = [
            'кроличья_миксоматоз', 'кроличья_геморрагическая_болезнь',
            'кроличий_кокцидиоз', 'кроличий_пастереллез', 'кроличий_листериоз',
            'кроличий_туберкулез', 'кроличий_сальмонеллез', 'кроличий_колибактериоз',
            'кроличий_стафилококкоз', 'кроличий_стрептококкоз', 'кроличий_клостридиоз',
            'кроличий_ботулизм', 'кроличий_столбняк', 'кроличий_сибирская_язва',
            'кроличий_бруцеллез', 'кроличий_лептоспироз', 'кроличий_риккетсиоз',
            'кроличий_хламидиоз', 'кроличий_микоплазмоз', 'кроличий_уреаплазмоз',
            'кроличий_токсоплазмоз', 'кроличий_неоспороз', 'кроличий_саркоцистоз',
            'кроличий_лейшманиоз', 'кроличий_трипаносомоз', 'кроличий_лейкоз',
            'кроличий_лимфома', 'кроличий_саркома', 'кроличий_аденокарцинома',
            'кроличий_меланома', 'кроличий_диабет', 'кроличий_гипотиреоз',
            'кроличий_гипертиреоз', 'кроличья_болезнь_кушинга', 'кроличья_болезнь_аддисона',
            'кроличье_ожирение', 'кроличья_анорексия', 'кроличья_булимия'
        ]
        
        # Черепахи
        turtle_diseases = [
            'черепаший_ринит', 'черепаший_пневмония', 'черепаший_абсцесс',
            'черепаший_сепсис', 'черепаший_остеомиелит', 'черепаший_артрит',
            'черепаший_подагра', 'черепаший_нефрит', 'черепаший_цистит',
            'черепаший_пиелонефрит', 'черепаший_гепатит', 'черепаший_панкреатит',
            'черепаший_гастроэнтерит', 'черепаший_колит', 'черепаший_энтерит',
            'черепаший_диарея', 'черепаший_запор', 'черепаший_вздутие_живота',
            'черепаший_анорексия', 'черепаший_авитаминоз', 'черепаший_рахит',
            'черепаший_остеопороз', 'черепаший_остеомаляция', 'черепаший_остеодистрофия',
            'черепаший_метаболический_синдром', 'черепаший_диабет', 'черепаший_гипотиреоз',
            'черепаший_гипертиреоз', 'черепашья_болезнь_кушинга', 'черепашья_болезнь_аддисона',
            'черепашье_ожирение', 'черепашья_анорексия', 'черепашья_булимия'
        ]
        
        # Определяем тип животного
        if disease in dog_diseases:
            return 'собака'
        elif disease in cat_diseases:
            return 'кошка'
        elif disease in bird_diseases:
            return 'птица'
        elif disease in hamster_diseases:
            return 'хомяк'
        elif disease in rabbit_diseases:
            return 'кролик'
        elif disease in turtle_diseases:
            return 'черепаха'
        else:
            # Если заболевание не определено, выбираем случайно
            return np.random.choice(self.animal_types)
    
    def _assign_symptoms_for_disease(self, disease, symptoms_vector):
        """Присвоение симптомов для конкретного заболевания"""
        
        # ПАРВОВИРУСНЫЙ ЭНТЕРИТ
        if disease == 'парвовирусный_энтерит':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('рвота')] = 1
            symptoms_vector[self.symptoms.index('диарея')] = 1
            symptoms_vector[self.symptoms.index('кровь_в_кале')] = 1
            symptoms_vector[self.symptoms.index('боль_в_животе')] = 1
            # ОАК
            symptoms_vector[self.symptoms.index('оак_лейкоциты_ниже_нормы')] = 1
            symptoms_vector[self.symptoms.index('оак_эритроциты_ниже_нормы')] = 1
            
        # ЧУМА ПЛОТОЯДНЫХ
        elif disease == 'чума_плотоядных':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('кашель')] = 1
            symptoms_vector[self.symptoms.index('выделения_из_носа')] = 1
            symptoms_vector[self.symptoms.index('конъюнктивит')] = 1
            symptoms_vector[self.symptoms.index('судороги')] = 1
            symptoms_vector[self.symptoms.index('паралич')] = 1
            symptoms_vector[self.symptoms.index('атаксия')] = 1
            # ОАК
            symptoms_vector[self.symptoms.index('оак_лейкоциты_ниже_нормы')] = 1
            
        # БЕШЕНСТВО
        elif disease == 'бешенство':
            symptoms_vector[self.symptoms.index('изменение_поведения')] = 1
            symptoms_vector[self.symptoms.index('агрессия')] = 1
            symptoms_vector[self.symptoms.index('водобоязнь')] = 1
            symptoms_vector[self.symptoms.index('светобоязнь')] = 1
            symptoms_vector[self.symptoms.index('гиперсаливация')] = 1
            symptoms_vector[self.symptoms.index('дисфагия')] = 1
            symptoms_vector[self.symptoms.index('паралич_глотки')] = 1
            symptoms_vector[self.symptoms.index('паралич_челюсти')] = 1
            symptoms_vector[self.symptoms.index('дезориентация')] = 1
            symptoms_vector[self.symptoms.index('галлюцинации')] = 1
            symptoms_vector[self.symptoms.index('спазмы_глотки')] = 1
            symptoms_vector[self.symptoms.index('судороги_дыхательных_мышц')] = 1
            
        # ЛЕПТОСПИРОЗ
        elif disease == 'лептоспироз':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('рвота')] = 1
            symptoms_vector[self.symptoms.index('диарея')] = 1
            symptoms_vector[self.symptoms.index('желтуха')] = 1
            symptoms_vector[self.symptoms.index('боль_в_животе')] = 1
            symptoms_vector[self.symptoms.index('мышечная_слабость')] = 1
            # БАК
            symptoms_vector[self.symptoms.index('бак_билирубин_общий_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бак_алт_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бак_аст_выше_нормы')] = 1
            
        # ИНФЕКЦИОННЫЙ ГЕПАТИТ
        elif disease == 'инфекционный_гепатит':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('рвота')] = 1
            symptoms_vector[self.symptoms.index('диарея')] = 1
            symptoms_vector[self.symptoms.index('желтуха')] = 1
            symptoms_vector[self.symptoms.index('увеличение_печени')] = 1
            symptoms_vector[self.symptoms.index('боль_в_животе')] = 1
            # БАК
            symptoms_vector[self.symptoms.index('бак_билирубин_общий_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бак_алт_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бак_аст_выше_нормы')] = 1
            
        # КОРОНАВИРУСНАЯ ИНФЕКЦИЯ
        elif disease == 'коронавирусная_инфекция':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('рвота')] = 1
            symptoms_vector[self.symptoms.index('диарея')] = 1
            symptoms_vector[self.symptoms.index('кашель')] = 1
            symptoms_vector[self.symptoms.index('выделения_из_носа')] = 1
            symptoms_vector[self.symptoms.index('конъюнктивит')] = 1
            
        # ПАНЛЕЙКОПЕНИЯ КОШЕК
        elif disease == 'панлейкопения':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('рвота')] = 1
            symptoms_vector[self.symptoms.index('диарея')] = 1
            symptoms_vector[self.symptoms.index('кровь_в_кале')] = 1
            symptoms_vector[self.symptoms.index('боль_в_животе')] = 1
            # ОАК
            symptoms_vector[self.symptoms.index('оак_лейкоциты_ниже_нормы')] = 1
            
        # КАЛИЦИВИРОЗ
        elif disease == 'калицивироз':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('кашель')] = 1
            symptoms_vector[self.symptoms.index('чихание')] = 1
            symptoms_vector[self.symptoms.index('выделения_из_носа')] = 1
            symptoms_vector[self.symptoms.index('конъюнктивит')] = 1
            symptoms_vector[self.symptoms.index('стоматит')] = 1
            
        # РИНОТРАХЕИТ
        elif disease == 'ринотрахеит':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('кашель')] = 1
            symptoms_vector[self.symptoms.index('чихание')] = 1
            symptoms_vector[self.symptoms.index('выделения_из_носа')] = 1
            symptoms_vector[self.symptoms.index('конъюнктивит')] = 1
            symptoms_vector[self.symptoms.index('слезотечение')] = 1
            
        # ВИРУСНЫЙ ПЕРИТОНИТ КОШЕК
        elif disease == 'вирусный_перитонит':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('потеря_веса')] = 1
            symptoms_vector[self.symptoms.index('асцит')] = 1
            symptoms_vector[self.symptoms.index('желтуха')] = 1
            symptoms_vector[self.symptoms.index('увеличение_печени')] = 1
            symptoms_vector[self.symptoms.index('боль_в_животе')] = 1
            
        # ГАСТРОЭНТЕРИТ
        elif disease == 'гастроэнтерит':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('рвота')] = 1
            symptoms_vector[self.symptoms.index('диарея')] = 1
            symptoms_vector[self.symptoms.index('боль_в_животе')] = 1
            symptoms_vector[self.symptoms.index('вздутие_живота')] = 1
            
        # ПНЕВМОНИЯ
        elif disease == 'пневмония':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('кашель')] = 1
            symptoms_vector[self.symptoms.index('затрудненное_дыхание')] = 1
            symptoms_vector[self.symptoms.index('учащенное_дыхание')] = 1
            symptoms_vector[self.symptoms.index('хрипы')] = 1
            symptoms_vector[self.symptoms.index('одышка')] = 1
            # ОАК
            symptoms_vector[self.symptoms.index('оак_лейкоциты_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('оак_нейтрофилы_выше_нормы')] = 1
            
        # ДЕРМАТИТ
        elif disease == 'дерматит':
            symptoms_vector[self.symptoms.index('зуд')] = 1
            symptoms_vector[self.symptoms.index('покраснение_кожи')] = 1
            symptoms_vector[self.symptoms.index('сыпь')] = 1
            symptoms_vector[self.symptoms.index('выпадение_шерсти')] = 1
            
        # ЭПИЛЕПСИЯ
        elif disease == 'эпилепсия':
            symptoms_vector[self.symptoms.index('судороги')] = 1
            symptoms_vector[self.symptoms.index('потеря_сознания')] = 1
            symptoms_vector[self.symptoms.index('атаксия')] = 1
            symptoms_vector[self.symptoms.index('тремор')] = 1
            
        # СЕРДЕЧНАЯ НЕДОСТАТОЧНОСТЬ
        elif disease == 'сердечная_недостаточность':
            symptoms_vector[self.symptoms.index('затрудненное_дыхание')] = 1
            symptoms_vector[self.symptoms.index('учащенное_дыхание')] = 1
            symptoms_vector[self.symptoms.index('одышка')] = 1
            symptoms_vector[self.symptoms.index('отеки')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('цианоз')] = 1
            
        # ДИАБЕТ 1 ТИПА
        elif disease == 'диабет_1_типа':
            symptoms_vector[self.symptoms.index('полифагия')] = 1
            symptoms_vector[self.symptoms.index('полиурия')] = 1
            symptoms_vector[self.symptoms.index('полидипсия')] = 1
            symptoms_vector[self.symptoms.index('потеря_веса')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('жажда')] = 1
            symptoms_vector[self.symptoms.index('бесцветная_моча')] = 1
            symptoms_vector[self.symptoms.index('низкая_удельная_масса_мочи')] = 1
            # БАК
            symptoms_vector[self.symptoms.index('бак_глюкоза_выше_нормы')] = 1
            # БАМ
            symptoms_vector[self.symptoms.index('бам_глюкоза_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бам_удельная_плотность_выше_нормы')] = 1
            
        # ДИАБЕТ 2 ТИПА
        elif disease == 'диабет_2_типа':
            symptoms_vector[self.symptoms.index('полифагия')] = 1
            symptoms_vector[self.symptoms.index('полиурия')] = 1
            symptoms_vector[self.symptoms.index('полидипсия')] = 1
            symptoms_vector[self.symptoms.index('потеря_веса')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('жажда')] = 1
            symptoms_vector[self.symptoms.index('бесцветная_моча')] = 1
            symptoms_vector[self.symptoms.index('низкая_удельная_масса_мочи')] = 1
            # БАК
            symptoms_vector[self.symptoms.index('бак_глюкоза_выше_нормы')] = 1
            # БАМ
            symptoms_vector[self.symptoms.index('бам_глюкоза_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бам_удельная_плотность_выше_нормы')] = 1
            
        # НЕСАХАРНЫЙ ДИАБЕТ
        elif disease == 'несахарный_диабет':
            symptoms_vector[self.symptoms.index('полиурия')] = 1
            symptoms_vector[self.symptoms.index('полидипсия')] = 1
            symptoms_vector[self.symptoms.index('жажда')] = 1
            symptoms_vector[self.symptoms.index('бесцветная_моча')] = 1
            symptoms_vector[self.symptoms.index('низкая_удельная_масса_мочи')] = 1
            # БАК - сахар в норме
            symptoms_vector[self.symptoms.index('бак_глюкоза_норма')] = 1
            # БАМ
            symptoms_vector[self.symptoms.index('бам_удельная_плотность_ниже_нормы')] = 1
            
        # ПОЧЕЧНАЯ НЕДОСТАТОЧНОСТЬ
        elif disease == 'почечная_недостаточность':
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('полиурия')] = 1
            symptoms_vector[self.symptoms.index('полидипсия')] = 1
            symptoms_vector[self.symptoms.index('рвота')] = 1
            symptoms_vector[self.symptoms.index('диарея')] = 1
            symptoms_vector[self.symptoms.index('бледность_слизистых')] = 1
            # БАК
            symptoms_vector[self.symptoms.index('бак_мочевина_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бак_креатинин_выше_нормы')] = 1
            # БАМ
            symptoms_vector[self.symptoms.index('бам_белок_выше_нормы')] = 1
            
        # ЦИСТИТ - детальные симптомы
        elif disease == 'цистит':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('частое_мочеиспускание')] = 1
            symptoms_vector[self.symptoms.index('болезненное_мочеиспускание')] = 1
            symptoms_vector[self.symptoms.index('кровь_в_моче')] = 1
            symptoms_vector[self.symptoms.index('недержание_мочи')] = 1
            symptoms_vector[self.symptoms.index('боль_при_мочеиспускании')] = 1
            symptoms_vector[self.symptoms.index('боль_внизу_живота')] = 1
            symptoms_vector[self.symptoms.index('красный_цвет_мочи')] = 1
            # БАМ
            symptoms_vector[self.symptoms.index('бам_лейкоциты_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бам_эритроциты_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бам_бактерии_выше_нормы')] = 1
            
        # ПИЕЛОНЕФРИТ - детальные симптомы
        elif disease == 'пиелонефрит':
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('боль_в_области_поясницы')] = 1
            symptoms_vector[self.symptoms.index('кровь_в_моче')] = 1
            symptoms_vector[self.symptoms.index('моча_как_мясные_помои')] = 1
            symptoms_vector[self.symptoms.index('белесый_цвет_мочи')] = 1
            symptoms_vector[self.symptoms.index('густая_моча_от_гноя')] = 1
            # БАМ
            symptoms_vector[self.symptoms.index('бам_лейкоциты_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бам_эритроциты_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бам_бактерии_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('бам_цилиндры_выше_нормы')] = 1
            
        # МОЧЕКАМЕННАЯ БОЛЕЗНЬ
        elif disease == 'мочекаменная_болезнь':
            symptoms_vector[self.symptoms.index('частое_мочеиспускание')] = 1
            symptoms_vector[self.symptoms.index('болезненное_мочеиспускание')] = 1
            symptoms_vector[self.symptoms.index('кровь_в_моче')] = 1
            symptoms_vector[self.symptoms.index('недержание_мочи')] = 1
            symptoms_vector[self.symptoms.index('боль_в_животе')] = 1
            # БАМ
            symptoms_vector[self.symptoms.index('бам_кристаллы_выше_нормы')] = 1
            
        # КОНЪЮНКТИВИТ
        elif disease == 'конъюнктивит':
            symptoms_vector[self.symptoms.index('выделения_из_глаз')] = 1
            symptoms_vector[self.symptoms.index('покраснение_глаз')] = 1
            symptoms_vector[self.symptoms.index('слезотечение')] = 1
            symptoms_vector[self.symptoms.index('зуд')] = 1
            symptoms_vector[self.symptoms.index('корочки_на_краях_век')] = 1
            
        # ГЛАУКОМА - детальные симптомы
        elif disease == 'глаукома':
            symptoms_vector[self.symptoms.index('выпячивание_глаз')] = 1
            symptoms_vector[self.symptoms.index('повышение_внутриглазного_давления')] = 1
            symptoms_vector[self.symptoms.index('покраснение_глаз')] = 1
            symptoms_vector[self.symptoms.index('слезотечение')] = 1
            symptoms_vector[self.symptoms.index('светобоязнь')] = 1
            
        # КАТАРАКТА
        elif disease == 'катаракта':
            symptoms_vector[self.symptoms.index('помутнение_хрусталика')] = 1
            symptoms_vector[self.symptoms.index('слезотечение')] = 1
            
        # КЕРАТИТ
        elif disease == 'кератит':
            symptoms_vector[self.symptoms.index('помутнение_роговицы')] = 1
            symptoms_vector[self.symptoms.index('покраснение_глаз')] = 1
            symptoms_vector[self.symptoms.index('слезотечение')] = 1
            symptoms_vector[self.symptoms.index('светобоязнь')] = 1
            
        # ОТИТ
        elif disease == 'отит':
            symptoms_vector[self.symptoms.index('зуд')] = 1
            # symptoms_vector[self.symptoms.index('выделения_из_ушей')] = 1  # симптом не в списке
            # symptoms_vector[self.symptoms.index('боль_в_ушах')] = 1  # симптом не в списке
            # symptoms_vector[self.symptoms.index('покраснение_ушей')] = 1  # симптом не в списке
            
        # СТОМАТИТ
        elif disease == 'стоматит':
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('слюнотечение')] = 1
            symptoms_vector[self.symptoms.index('неприятный_запах_изо_рта')] = 1
            symptoms_vector[self.symptoms.index('кровоточивость_десен')] = 1
            
        # АНЕМИЯ
        elif disease == 'анемия':
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('бледность_слизистых')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('холодные_конечности')] = 1
            # ОАК
            symptoms_vector[self.symptoms.index('оак_эритроциты_ниже_нормы')] = 1
            symptoms_vector[self.symptoms.index('оак_гемоглобин_ниже_нормы')] = 1
            symptoms_vector[self.symptoms.index('оак_гематокрит_ниже_нормы')] = 1
            
        # ГИПОТИРЕОЗ
        elif disease == 'гипотиреоз':
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('увеличение_веса')] = 1
            symptoms_vector[self.symptoms.index('отеки')] = 1
            symptoms_vector[self.symptoms.index('выпадение_шерсти')] = 1
            # БАК
            symptoms_vector[self.symptoms.index('бак_холестерин_выше_нормы')] = 1
            
        # ГИПЕРТИРЕОЗ
        elif disease == 'гипертиреоз':
            symptoms_vector[self.symptoms.index('полифагия')] = 1
            symptoms_vector[self.symptoms.index('потеря_веса')] = 1
            symptoms_vector[self.symptoms.index('беспокойство')] = 1
            symptoms_vector[self.symptoms.index('учащенное_сердцебиение')] = 1
            symptoms_vector[self.symptoms.index('рвота')] = 1
            symptoms_vector[self.symptoms.index('диарея')] = 1
            
        # АРТРИТ
        elif disease == 'артрит':
            symptoms_vector[self.symptoms.index('хромота')] = 1
            symptoms_vector[self.symptoms.index('скованность_движений')] = 1
            symptoms_vector[self.symptoms.index('боль_в_суставах')] = 1
            symptoms_vector[self.symptoms.index('нежелание_двигаться')] = 1
            symptoms_vector[self.symptoms.index('отеки')] = 1
            
        # ОЖИРЕНИЕ
        elif disease == 'ожирение':
            symptoms_vector[self.symptoms.index('увеличение_веса')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('затрудненное_дыхание')] = 1
            symptoms_vector[self.symptoms.index('нежелание_двигаться')] = 1
            
        # КАХЕКСИЯ
        elif disease == 'кахексия':
            symptoms_vector[self.symptoms.index('потеря_веса')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('слабость')] = 1
            symptoms_vector[self.symptoms.index('бледность_слизистых')] = 1
            
        # ЛИМФОМА
        elif disease == 'лимфома':
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('увеличение_лимфоузлов')] = 1
            symptoms_vector[self.symptoms.index('потеря_веса')] = 1
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            # ОАК
            symptoms_vector[self.symptoms.index('оак_лимфоциты_выше_нормы')] = 1
            
        # САРКОМА
        elif disease == 'саркома':
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('потеря_веса')] = 1
            symptoms_vector[self.symptoms.index('боль_в_животе')] = 1
            
        # КАРЦИНОМА
        elif disease == 'карцинома':
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('потеря_веса')] = 1
            symptoms_vector[self.symptoms.index('боль_в_животе')] = 1
            
        # МЕЛАНОМА
        elif disease == 'меланома':
            symptoms_vector[self.symptoms.index('пятна_на_коже')] = 1
            symptoms_vector[self.symptoms.index('язвы_на_коже')] = 1
            
        # ЛЕЙКЕМИЯ
        elif disease == 'лейкемия':
            symptoms_vector[self.symptoms.index('вялость')] = 1
            symptoms_vector[self.symptoms.index('анорексия')] = 1
            symptoms_vector[self.symptoms.index('потеря_веса')] = 1
            symptoms_vector[self.symptoms.index('лихорадка')] = 1
            symptoms_vector[self.symptoms.index('бледность_слизистых')] = 1
            symptoms_vector[self.symptoms.index('увеличение_лимфоузлов')] = 1
            # ОАК
            symptoms_vector[self.symptoms.index('оак_лейкоциты_выше_нормы')] = 1
            symptoms_vector[self.symptoms.index('оак_эритроциты_ниже_нормы')] = 1
            
        # По умолчанию - случайные симптомы
        else:
            # Для неизвестных заболеваний добавляем случайные симптомы
            random_symptoms = np.random.choice(len(self.symptoms), 
                                             size=np.random.randint(3, 8), 
                                             replace=False)
            for symptom_idx in random_symptoms:
                symptoms_vector[symptom_idx] = 1

def main():
    """Основная функция для создания и тестирования датасета"""
    print("=" * 60)
    print("СОЗДАНИЕ РАСШИРЕННОГО ВЕТЕРИНАРНОГО ДАТАСЕТА")
    print("=" * 60)
    
    # Создаем датасет
    dataset_creator = AdvancedVeterinaryDataset()
    df = dataset_creator.create_realistic_dataset(n_samples=5000)
    
    print(f"Создан датасет с {len(df)} записями")
    print(f"Количество симптомов: {len(dataset_creator.symptoms)}")
    print(f"Количество заболеваний: {len(dataset_creator.diseases)}")
    print(f"Количество видов животных: {len(dataset_creator.animal_types)}")
    
    # Сохраняем датасет
    df.to_csv('advanced_veterinary_dataset.csv', index=False)
    print("Датасет сохранен в файл: advanced_veterinary_dataset.csv")
    
    # Создаем файл с описанием симптомов и заболеваний
    with open('advanced_symptoms_diseases.txt', 'w', encoding='utf-8') as f:
        f.write("СИМПТОМЫ:\n")
        for i, symptom in enumerate(dataset_creator.symptoms):
            f.write(f"{i+1}. {symptom}\n")
        
        f.write("\nЗАБОЛЕВАНИЯ:\n")
        for i, disease in enumerate(dataset_creator.diseases):
            f.write(f"{i+1}. {disease}\n")
    
    print("Описание симптомов и заболеваний сохранено в файл: advanced_symptoms_diseases.txt")
    
    # Показываем статистику
    print("\nСтатистика датасета:")
    print(f"Распределение по видам животных:")
    print(df['animal_type'].value_counts())
    print(f"\nТоп-10 заболеваний:")
    print(df['disease'].value_counts().head(10))
    
    # Показываем примеры симптомов для конкретных заболеваний
    print("\nПримеры симптомов для ключевых заболеваний:")
    key_diseases = ['парвовирусный_энтерит', 'чума_плотоядных', 'бешенство', 'цистит', 'пиелонефрит', 'диабет_1_типа']
    
    for disease in key_diseases:
        if disease in df['disease'].values:
            print(f"\n{disease.upper()}:")
            disease_data = df[df['disease'] == disease].iloc[0]
            symptoms = [symptom for symptom in dataset_creator.symptoms 
                       if disease_data[symptom] == 1]
            print(f"  Симптомы: {', '.join(symptoms[:8])}...")
    
    print("\n" + "=" * 60)
    print("РАСШИРЕННЫЙ ДАТАСЕТ СОЗДАН УСПЕШНО!")
    print("=" * 60)

if __name__ == "__main__":
    main()
