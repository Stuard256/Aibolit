# Инструкция по настройке ML диагностики

## Шаг 1: Установка зависимостей

```bash
# Установите библиотеки для машинного обучения
pip install scikit-learn pandas numpy joblib

# Или используйте файл requirements
pip install -r requirements_ml.txt
```

## Шаг 2: Обучение модели

```bash
# Запустите скрипт обучения
python train_model.py
```

После выполнения вы увидите:
- Создание датасета (2000 записей)
- Обучение 4 моделей
- Сравнение результатов
- Сохранение лучшей модели в `animal_disease_model.pkl`

## Шаг 3: Запуск веб-приложения

```bash
# Запустите Flask приложение
python app.py
```

## Шаг 4: Тестирование

1. Откройте браузер: `http://localhost:5000`
2. Нажмите "Диагностика" в навигации
3. Выберите животное и симптомы
4. Получите предсказания

## Примеры тестирования

### Тест 1: Гастроэнтерит
- Животное: Собака
- Симптомы: Повышенная температура, Рвота, Диарея, Сниженный аппетит
- Ожидаемый результат: Гастроэнтерит в топ-3

### Тест 2: Респираторная инфекция
- Животное: Кошка
- Симптомы: Кашель, Чихание, Выделения из носа, Повышенная температура
- Ожидаемый результат: Респираторная инфекция в топ-3

### Тест 3: Дерматит
- Животное: Собака
- Симптомы: Зуд, Выпадение шерсти
- Ожидаемый результат: Дерматит в топ-3

## Структура файлов

```
├── ml_model.py              # ML модель
├── train_model.py          # Обучение
├── app.py                  # Flask приложение
├── templates/diagnosis.html # Веб-интерфейс
├── animal_disease_model.pkl # Обученная модель
└── requirements_ml.txt     # Зависимости
```

## Возможные проблемы

### Ошибка: "ML модель не найдена"
**Решение**: Запустите `python train_model.py` для создания модели

### Ошибка: "ModuleNotFoundError: No module named 'sklearn'"
**Решение**: Установите scikit-learn: `pip install scikit-learn`

### Ошибка: "ML модель не загружена"
**Решение**: Убедитесь, что файл `animal_disease_model.pkl` существует

## Производительность

- **Время обучения**: ~30 секунд
- **Размер модели**: ~2MB
- **Время предсказания**: <100ms
- **Точность**: >85%

## Для разработчиков

### Добавление новых симптомов:
1. Отредактируйте список `symptoms` в `ml_model.py`
2. Переобучите модель: `python train_model.py`

### Добавление новых заболеваний:
1. Отредактируйте список `diseases` в `ml_model.py`
2. Добавьте логику симптомов для нового заболевания
3. Переобучите модель: `python train_model.py`

### Изменение веб-интерфейса:
1. Отредактируйте `templates/diagnosis.html`
2. Добавьте новые чекбоксы для симптомов
3. Перезапустите Flask: `python app.py`
